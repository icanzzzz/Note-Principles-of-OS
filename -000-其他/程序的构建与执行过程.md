---
title: 程序的构建与执行过程
---



# 编译

- > 先翻译源代码，后==生成逻辑地址==

# 链接（广义）

## Remind

- 链接后==形成完整的逻辑地址==

## 链接（狭义）

- > 生成可执行文件，==调整逻辑地址==（源文件编译后都是以0开始的模块，多个源文件生成一个可执行文件，就需要调整逻辑地址，形成完整的逻辑地址）

## 符号解析（重定位）

- > 将符号引用（模块引用）映射到符号定义（模块的地址）（在==装入后==（狭义）才能解析，要是没有装入（狭义）就没东西解析）

# 装入（广义）

## 装入（狭义）

### Remind

- > 将装入模块装入内存

### 静态装入

- 在==程序启动时==，将所有代码和数据一次性加载到内存中

### 动态装入

- 在==程序运行时==，根据需要将代码或数据加载到内存中

## 地址转换（重定位）

### Remind

- > ==映射到物理地址==

### 静态重定位

- ==装入时==将逻辑地址映射到物理地址

### ==动态重定位==

- ==运行时==将逻辑地址映射到物理地址

# 程序运行实际流程

- ```mermaid
  gantt
  dateFormat YYYY-MM
  title 程序运行实际流程
  section 编译
  编译:done,a1,2000-01,1M
  section 链接（广义）
  链接（狭义）:active,b1,after a1,1M
  符号解析:done,b2,after c1,1M
  section 装入（广义）
  装入（狭义）:active,c1,after d2,1M
  地址转换:done,c2,after b2,1M
  section 执行状态
  可执行文件:crit,d1,after b1,1M
  执行:crit,d2,after d1,1M
  ```

- | 流程         | 1    | 2            | 3          | 4    | 5        | 6    | 7 |
  | ------------ | ---- | ------------ | ---------- | ---- | -------- | ---- | --- |
  | 编译         | 编译 |              |            |      |          |      |  |
  | 链接（广义） |      | 链接（狭义） |            |      |  | 符号解析 |  |
  | 装入（广义） |      |              |            |  | 装入（狭义） |  | 地址转换 |
  | 执行状态     |      |              | 可执行文件 | 执行 |          |      |  |